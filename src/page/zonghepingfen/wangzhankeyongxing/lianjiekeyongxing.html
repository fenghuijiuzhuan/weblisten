<!DOCTYPE html>
<html lang="en">
<head>
  <title>Document</title>
  <script src="/lib/require-2.1.11.min.js"></script>
  <script src="/frame/echarts-2.2.7/dist/echarts.js"></script>
</head>
<body>
  <!-- 哎呀 什么都没有 -->
<script>
require(['/src/config/require.config.js'], function () {
  require(['/src/js/content_iframe.js', 'echarts/chart/bar', 'echarts/chart/pie'], function (Moo) {
    var body = Moo.body,
      bread = Moo.bread,
      bodytitle = Moo.bodytitle,
      panel = Moo.panel,
      ec = Moo.ec;
      // main body
      var bod = body.create().appendTo($('body'));
      bod.eq(1).css({
        top: 0,
        left: 0,
        bottom: 0
      })
      var main = bod.find('.wping-bodymain');
      var content = bod.find('.wping-bodycontent');

      var bodyTitleData = {
        title: '链接可用性'
      }
      bodytitle.create(content, bodyTitleData)

    var panelIBox_1 = {
      title: '当前扣分情况',
      body: '<div>-1分</div>'
    }
    panel.create(content, panelIBox_1, function (dom) {
      dom.css({
    		display: 'inline-block',
    		'vertical-align': 'top',
    		width: '32%',
        height:'200px',
        marginRight: '1%'
    	})
    });

    
     var panelIBox_2 = {
      title: '考察点',
      body: '互动回应类栏目长期未回应的情况。'
    }
    panel.create(content, panelIBox_2, function(dom){
    	dom.css({
    		display: 'inline-block',
    		'vertical-align': 'top',
    		width: '32%',
        height:'200px',
        marginRight: '1%'
    	})
    })

    var panelIBox_3 = {
      title: '考核标准',
      body: '监测1周，每天间隔性访问<span style="color: #fb3f00;">20次</span>以上，超过（含）15秒网站仍打不开的次数比例累计超过（含）<span style="color: #fb3f00;">5%</span>，即单项否决。'
    }
    panel.create(content, panelIBox_3, function(dom){
    	dom.css({
    		display: 'inline-block',
    		'vertical-align': 'top',
    		width: '34%',
        height:'200px'
    	})
    })

      var panelParam = {
        title: '扣分情况分析',
        body: '<div><div id="main-chart" style=" width:40%; height:400px; display:inline-block;"><h3>用户访问时长图</h3></div><div style="width:47%; height:400px; display:inline-block;vertical-align: top;" id="main-charts-table"><div></div></div></div>',
      }
      panel.create(content, panelParam, function(dom) {
        var div = dom.find("#main-chart")[0]

        var myChart1 = ec.init(div);
        // 指定图表的配置项和数据
        var option1 = {
          title: {
            text: '用户访问时长',
            /*  subtext: '纯属虚构',*/
            x: 'left'
          },
          tooltip: {
            trigger: 'item',
            formatter: "{a} <br/>{b} : {c} ({d}%)"
          },
          legend: {
            orient: 'vertical',
            left: 'left',
            data: ['其他页面', '首页']
          },
          series: [{
            name: '访问来源',
            type: 'pie',
            radius: '55%',
            center: ['50%', '60%'],
            data: [{
              value: 2,
              name: '其他页面'
            }, {
              value: 3,
              name: '首页'
            }, ],
            itemStyle: {
              emphasis: {
                shadowBlur: 10,
                shadowOffsetX: 0,
                shadowColor: 'rgba(0, 0, 0, 0.5)'
              }
            }
          }]
        };

        myChart1.setOption(option1);

        var div2 = dom.find("#main-charts-table div")[0];
        layui.use('table', function() {
          var table = layui.table;
          //第一个实例
          table.render({
            elem: div2,
            url: '/testdata/zonghepingfen/wangzhankeyongxing/lianjiekeyongxing2.json', //数据接口
            height: 'auto',
            cols: [
              [ //表头
                {field: 'id',title: '序号',width: "10%"}, 
                {field: 'ipagesd',title: '页面',width: "30%"}, 
                {field: 'noconlink',title: '链接不可用数',width: "30%",sort: true}, 
                {field: 'dfscore',title: '扣分',width: ""}
              ]
            ]
          });
        })
      })
      
      
      var panelParam = {
        body: '<div id="sy"><div>标题</div></div><div id="qtym"><div>标题</div></div>',
      }
      panel.create(content, panelParam, function(dom) {
        var div3 = dom.find("#sy div")[0]
        layui.use('table', function() {
          var table = layui.table;
          //第一个实例
          table.render({
            elem: div3,
            height: 290,
            title: '其他页面错误链接列表',
            url: '/testdata/zonghepingfen/wangzhankeyongxing/lianjiekeyongxing.json', //数据接口
            page: true, //开启分页
            cols: [
              [ //表头序号、更新时间、标题、
                {field: 'id',title: '序号',width: "5%"}, 
                {field: 'updatetime',title: '更新时间',width: "10%",sort: true}, 
                {field: 'type',title: '所属栏目', width: "15%"}, 
                {field: 'title',title: '标题',width: ""}
              ]
            ]
          });
        })
  
        var div4 = dom.find("#qtym div")[0]
        layui.use('table', function() {
          var table = layui.table;
          //第一个实例
          table.render({
            elem: div4,
            height: 290,
            title: '其他页面错误链接列表',
            url: '/testdata/zonghepingfen/wangzhankeyongxing/lianjiekeyongxing2.json', //数据接口
            page: true, //开启分页
            cols: [
              [ //表头序号、更新时间、标题、
                {field: 'id',title: '序号',width: "5%"}, 
                {field: 'updatetime',title: '更新时间',width: "10%",sort: true}, 
                {field: 'type', title: '所属栏目',width: "15%"}, 
                {field: 'title',title: '标题', width: ""}
              ]
            ]
          });
        })
      })
    });

  })

</script>
	</body>

</html>